<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <link rel="stylesheet" href="/css/bootstrap.min.css">
    <meta charset="UTF-8">
    <style>
        .movieSearch {
            margin-top: 20px;
        }
        .movieSearch table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0 15px;
            margin-bottom: 20px;
        }
        .movieSearch th, .movieSearch td {
            padding: 15px;
            text-align: left;
            vertical-align: middle;
        }
        .movieSearch th {
            background-color: #f2f2f2;
            border-bottom: 2px solid #ddd;
        }
        .movieSearch tr {
            background-color: #fff;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            transition: all 0.3s ease;
        }
        .movieSearch tr:hover {
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        .movieSearch img {
            width: 100px;
            height: auto;
<!--            height: 150px;-->
            object-fit: cover;
            border-radius: 5px;
            cursor: pointer;
            transition: transform 0.3s ease;
        }
        .movieSearch img:hover {
            transform: scale(1.05);
        }
        .movieSearch .title {
            font-weight: bold;
            font-size: 1.1em;
        }
        .movieSearch .release-date {
            color: #666;
        }
        .movieSearch .rating {
            font-weight: bold;
            color: #ffa500;
        }
    </style>
</head>

<body>
<div class="container">
    <div th:replace="fragments/bodyHeader :: bodyHeader" />

    <div class="jumbotron">
        <h2>검색 결과</h2>
        <div class="movieSearch">
            <table>
                <thead>
                <tr>
                    <th>포스터</th>
                    <th>제목</th>
                    <th>개봉일</th>
                    <th>평점</th>
                </tr>
                </thead>
                <tbody id="search-results">
                <!-- 검색 결과가 여기에 동적으로 추가됩니다 -->
                </tbody>
            </table>
        </div>
    </div>
    <div th:replace="fragments/footer :: footer" />
</div>

<script th:inline="javascript">
    // 서버에서 전달받은 JSON 문자열
    var searchResultJson = /*[[${searchResult}]]*/ '{}';

    // JSON 파싱
    var searchData = JSON.parse(searchResultJson);

    // 검색 결과 표시
    var searchResults = document.getElementById('search-results');
    searchData.results.forEach(function(movie) {
        var row = document.createElement('tr');

        var posterCell = document.createElement('td');
        var posterImg = document.createElement('img');
        posterImg.src = 'https://image.tmdb.org/t/p/w500' + movie.poster_path;
        posterImg.alt = movie.title;
        posterImg.onclick = function() {
            window.location.href = '/jwt-login/contents/' + movie.id;
        };
        posterCell.appendChild(posterImg);

        var titleCell = document.createElement('td');
        titleCell.innerHTML = '<span class="title">' + movie.title + '</span>';

        var releaseDateCell = document.createElement('td');
        releaseDateCell.innerHTML = '<span class="release-date">' + movie.release_date + '</span>';

        var ratingCell = document.createElement('td');
        ratingCell.innerHTML = '<span class="rating">' + movie.vote_average + '</span><br>(' + movie.vote_count + '표)';

        row.appendChild(posterCell);
        row.appendChild(titleCell);
        row.appendChild(releaseDateCell);
        row.appendChild(ratingCell);

        searchResults.appendChild(row);
    });
</script>

</body>
</html>